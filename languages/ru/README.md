# Xray supports Reality / VLESS WebSocket/gRPC+TLS protocol + Nginx one-click installation script

[简体中文](README.md) | [English](languages/en/README.md) | [Русский](languages/ru/README.md) | [فارسی](languages/fa/README.md)

[![GitHub stars](https://img.shields.io/github/stars/hello-yunshu/Xray_bash_onekey?color=%230885ce)](https://github.com/hello-yunshu/Xray_bash_onekey/stargazers) [![GitHub forks](https://img.shields.io/github/forks/hello-yunshu/Xray_bash_onekey?color=%230885ce)](https://github.com/hello-yunshu/Xray_bash_onekey/network) [![GitHub issues](https://img.shields.io/github/issues/hello-yunshu/Xray_bash_onekey)](https://github.com/hello-yunshu/Xray_bash_onekey/issues)

> Спасибо за разрешение на некоммерческое развитие открытого исходного кода JetBrains

## Инструкция по использованию

* Вы можете напрямую ввести команду: `idleleo` для управления скриптом.
* Для Reality рекомендуется использовать Nginx как обратный прокси, который можно установить через скрипт.
* Рекомендуется включить fail2ban, который также можно установить через скрипт.
* Используйте предложение о ссылке для обмена от [@DuckSoft](https://github.com/DuckSoft) [(beta)](https://github.com/XTLS/Xray-core/issues/91), поддерживающее Qv2ray, V2rayN, V2rayNG.
* Используйте предложение из проекта [XTLS](https://github.com/XTLS/Xray-core/issues/158), следуя стандарту [UUIDv5](https://tools.ietf.org/html/rfc4122#section-4.3), чтобы отобразить пользовательские строки в UUID VLESS.
* Установка Reality: [Установка сервера протокола Xray Reality](https://hey.run/archives/da-jian-xray-reality-xie-yi-fu-wu-qi).
* Риски использования протокола Reality: [Риски использования протокола Xray Reality](https://hey.run/archives/reality-xie-yi-de-feng-xian).
* Ускорение сервера с помощью протокола Reality: [Ускорение сервера с помощью "утечек" протокола Reality](https://hey.run/archives/li-yong-reality-xie-yi-lou-dong-jia-su-fu-wu-qi).
* Добавление конфигурации балансировки нагрузки, руководство: [XRay продвинутые возможности – Настройка балансировки нагрузки на сервере](https://hey.run/archives/xrayjin-jie-wan-fa---da-jian-hou-duan-fu-wu-qi-fu-zai-jun-heng).
* Поддержка протокола gRPC, подробнее: [XRay продвинутые возможности – Использование протокола gRPC](https://hey.run/archives/xrayjin-jie-wan-fa---shi-yong-grpcxie-yi).

## Telegram группа

* Группа для обсуждений Telegram: <https://t.me/idleleo_chat>

## Подготовка

* Подготовьте сервер, запущенный за пределами Китая с публичным IP.
* Если вы устанавливаете протокол Reality, найдите доменное имя, соответствующее требованиям Xray.
* Если вы устанавливаете версию с TLS, подготовьте доменное имя и добавьте запись A.
* Прочитайте [официальную документацию Xray](https://xtls.github.io), чтобы понять протоколы Reality TLS WebSocket gRPC и информацию о Xray, а также требования к доменному имени для целевого объекта Reality.
* **Убедитесь, что установлен curl**, пользователи CentOS выполняют: `yum install -y curl`; пользователи Debian/Ubuntu выполняют: `apt install -y curl`.

## Способ установки

Скопируйте и выполните:

``` bash
bash <(curl -Ss https://www.idleleo.com/install.sh)
```

## Внимание

* Если вы не знаете значение параметров в скрипте, кроме обязательных полей, используйте значения по умолчанию (нажимайте Enter до конца).
* Пользователям Cloudflare рекомендуется включить CDN после завершения установки.
* Для использования этого скрипта необходимо владеть базовыми знаниями Linux и компьютерных сетей.
* В настоящее время поддерживаются Debian 9+, Ubuntu 18.04+, Centos7+. Некоторые шаблоны Centos могут вызывать проблемы при компиляции, поэтому при возникновении таких проблем рекомендуется перейти на другой системный шаблон.
* Автор предоставляет ограниченную поддержку, так как он слишком глуп.
* Ссылки для клиентов предоставляются в экспериментальной версии, возможны изменения в будущем, проверяйте совместимость клиента самостоятельно.
* Отображение пользовательских строк в UUIDv5 требует поддержки со стороны клиента.

## Благодарности

* Этот скрипт основан на <https://github.com/wulabing/V2Ray_ws-tls_bash_onekey>, спасибо wulabing.
* Проект TCP-ускорения в этом скрипте взят из <https://github.com/ylx2016/Linux-NetSpeed>, спасибо ylx2016.

## Сертификаты

Если у вас уже есть сертификаты для вашего домена, сохраните файлы crt и key с именами xray.crt и xray.key в каталоге /etc/idleleo/cert (если каталог не существует, создайте его). Обратите внимание на разрешения файлов сертификата и их срок действия, если срок действия пользовательского сертификата истекает, вам нужно будет продлить его самостоятельно.

Скрипт может автоматически генерировать сертификат Let's Encrypt, действительность которого составляет 3 месяца, теоретически автоматическое продление этих сертификатов поддерживается.

## Просмотр конфигурации клиента

`cat /etc/idleleo/xray_info.txt`

## Описание Xray

* Xray — это отличный инструмент открытого программного обеспечения для сетевых прокси, который помогает вам комфортно пользоваться интернетом, и сейчас доступен для всех платформ: Windows, Mac, Android, IOS, Linux и других операционных систем.
* Этот скрипт является полнофункциональным однострочным установочным скриптом, и после успешной установки все шаги можно завершить, просто следуя инструкциям выводу результатов для настройки клиента.
* Обратите внимание: мы настоятельно рекомендуем вам полностью понимать рабочий процесс и принцип работы всей программы.

## Рекомендация установить только один прокси на одном сервере

* По умолчанию этот скрипт устанавливает последнюю версию ядра Xray.
* Рекомендуется использовать порт 443 по умолчанию для подключения.
* Содержимое маскировки можно изменить самостоятельно.

## Дополнительные замечания

* Рекомендуется использовать чистую среду для этого скрипта, если вы новичок, не используйте систему CentOS.
* Перед тем, как применять эту программу в производственной среде, обязательно протестируйте её работоспособность.
* Эта программа зависит от Nginx для реализации некоторых функций, пользователям, которые ранее устанавливали Nginx с помощью [LNMP](https://lnmp.org) или других аналогичных скриптов, следует обращать особое внимание, поскольку использование этого скрипта может привести к непредвиденным ошибкам.
* Пользователям системы CentOS рекомендуется заранее разрешить необходимые порты в брандмауэре (по умолчанию: 80, 443).

## Запуск

Запустить Xray: `systemctl start xray`

Остановить Xray: `systemctl stop xray`

Запустить Nginx: `systemctl start nginx`

Остановить Nginx: `systemctl stop nginx`

## Связанные директории

Конфигурация сервера Xray: `/etc/idleleo/conf/xray/config.json`

Директория Nginx: `/usr/local/nginx`

Файлы сертификатов: `/etc/idleleo/cert/xray.key` и `/etc/idleleo/cert/xray.crt` обратите внимание на настройку прав доступа к файлам сертификатов

Файлы конфигурационной информации и т.д.: `/etc/idleleo`
